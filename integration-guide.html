<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Integration Guide  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="Integration Guide  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
           Docs
        </a>
         (72% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="dash-feed://https%3A%2F%2Fstreamlayer%2Egithub%2Eio%2Fsdk%2Dios%2Fdocsets%2F%2Exml">
            <img class="header-icon" src="img/dash.png"/>
            Install in Dash
          </a>
        </p>
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html"> Reference</a>
      <img class="carat" src="img/carat.png" />
      Integration Guide  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Documentation.html">Documentation</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="about-streamlayer.html">About StreamLayer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="architecture-overview.html">Architecture Overview</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="sample-integrations.html">Sample Integrations</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Guides.html">Guides</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="integration-guide.html">Integration Guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="constraints-guide.html">Constraints Guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="audio-sessions-management.html">Audio Sessions Management</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="overlay-visibility-handling.html">Overlay Visibility Handling</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="customize-text-messages.html">Customize Text Messages</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SLROverlayViewController.html">SLROverlayViewController</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/StreamLayer.html">StreamLayer</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/SLRAudioSessionType.html">SLRAudioSessionType</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SLROverlayDelegate.html">SLROverlayDelegate</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            
            <h1 id='integration-guide' class='heading'>Integration Guide</h1>

<ul>
<li><a href="#integration-guide">Integration Guide</a></li>
<li><a href="#background">Background</a></li>
<li><a href="#prerequisites">Prerequisites</a>

<ul>
<li><a href="#system-requirements">System requirements</a></li>
<li><a href="#get-the-sdk-api-key">Get the SDK API key</a></li>
</ul></li>
<li><a href="#installation">Installation</a>

<ul>
<li><a href="#using-carthage">Using Carthage</a></li>
<li><a href="#manual-installation">Manual installation</a></li>
<li><a href="#additional-distributions">Additional distributions</a></li>
</ul></li>
<li><a href="#integration">Integration</a>

<ul>
<li><a href="#basic-terminology">Basic terminology</a></li>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#initialize-of-the-sdk">Initialize of the SDK</a></li>
<li><a href="#create-streamlayer-view-controller">Create StreamLayer View Controller</a></li>
</ul></li>
<li><a href="#positioning-the-overlay-handling-orientation-changes">Positioning the overlay, handling orientation changes</a></li>
<li><a href="#implement-slroverlaydelegate-methods">Implement SLROverlayDelegate methods</a>

<ul>
<li><a href="#audio-sessions-management">Audio Sessions Management</a></li>
<li><a href="#customize-text-messages">Customize Text Messages</a></li>
<li><a href="#control-the-sdk-appearance">Control the SDK appearance</a></li>
</ul></li>
<li><a href="#integration-checklist">Integration Checklist</a></li>
<li><a href="#further-reading">Further Reading</a></li>
</ul>
<h1 id='background' class='heading'>Background</h1>

<p>Before starting the integration, please read the <a href="./architecture-overview.html">Architecture Overview</a>. </p>
<h1 id='prerequisites' class='heading'>Prerequisites</h1>
<h2 id='system-requirements' class='heading'>System requirements</h2>

<ul>
<li>XCode 11.3.1</li>
<li>Target of iOS 11 or higher<br></li>
<li>Swift, Objective-C</li>
</ul>

<p>If this does not meet your current system characteristics, please contact our development team. We can check to confirm if your app can host the SDK, and if it does not, we can explore building additional versions of the SDK to accommodate your specific needs.  </p>
<h2 id='get-the-sdk-api-key' class='heading'>Get the SDK API key</h2>

<p>If you do not have an SDK key, please use the instructions below to obtain one:</p>

<p>Provide us with your email, which we will use to create a new organization for you, including creation of a personal dashboard. At that point, you will then receive an invitation via email with a link to the admin panel and credentials for authentication. After receiving an access to the admin panel, you will be able to generate an API key in the <a href="https://studio.staging.streamlayer.io/develop/">development section of the admin panel</a>.
This API key is used by the SDK to communicate with the server and is required for the integration.</p>
<h1 id='installation' class='heading'>Installation</h1>

<p>The SDK is distributed as a dynamic framework. There are two options to integrate the SDK framework: 1) Using Carthage package manager, or 2) manually.</p>
<h2 id='using-carthage' class='heading'>Using Carthage</h2>

<ol>
<li>Install Carthage using brew 
<code>
brew tap streamlayer/formulas
brew reinstall streamlayer/formulas/carthage
</code></li>
</ol>

<p><em>Note: Internally we prefer to work with <a href="https://github.com/nsoperations/Carthage">https://github.com/nsoperations/Carthage</a> fork because it has numerous fixes and is much easier to work with overall</em>.</p>

<ol>
<li>Add <code>binary &quot;https://streamlayer.github.io/sdk-ios/releases.json&quot;</code> to your Cartfile.</li>
<li>Run <code>carthage update</code>.</li>
<li>Drag StreamLayer.framework from the appropriate platform directory in Carthage/Build/ to the “Linked Frameworks and Libraries” section of your Xcode project’s “General” settings or, preferably, use carthage copy-frameworks build stage to do that</li>
</ul><div class="aside aside-since">
    <p class="aside-title">Since</p>
    Since Carthage doesn&rsquo;t support specifying dependencies for binary distributions manually, you will need to add the following dependencies to your package manager:

<ul>
<li>WebRTC (M78) - prebuilt binary available at <a href="https://github.com/signalapp/signal-webrtc-ios-artifacts">https://github.com/signalapp/signal-webrtc-ios-artifacts</a> or you may build your own</li>
</ul>

</div><ul>
</ol>
<h2 id='manual-installation' class='heading'>Manual installation</h2>

<ol>
<li>Download latest release from the Release section in the repo: <a href="https://github.com/StreamLayer/sdk-ios/releases">https://github.com/StreamLayer/sdk-ios/releases</a><br></li>
<li>Drag downloaded StreamLayer.framework from the appropriate platform directory in Carthage/Build/ to the “Linked Frameworks and Libraries” section of your Xcode project’s “General” settings.</li>
</ol>
<h2 id='additional-distributions' class='heading'>Additional distributions</h2>

<p>Cocoapods and other package managers are not available now. Other distributions will be developed soon depending on community requests requests.</p>
<h1 id='integration' class='heading'>Integration</h1>
<h2 id='basic-terminology' class='heading'>Basic terminology</h2>

<ul>
<li>Host App:  The app in which the SDK is being integrated</li>
<li>Overlay:  Interactive overlay, with functionality dependent on overlay type (Twitter, Voice Chat, Game Statistics, etc.)</li>
<li>Overlay Button:  The button which is shown on top of the interface and activates the StreamLayer menu</li>
<li>Overlay Menu:  Expanding menu which shows all the available overlays</li>
<li>Overlay Wrapper View:  Wrapper view for the SDK view hierarchy</li>
</ul>

<p>When you press the <strong>Overlay Button</strong>, the <strong>Overlay Menu</strong> will open. When you press a menu item, the chosen <strong>Overlay</strong> will be activated. The <strong>Overlay</strong>, <strong>Overlay Button</strong> and <strong>Overlay Menu</strong> are rendered inside the <strong>Overlay Wrapper View</strong> which the host app provides to the SDK.</p>

<p><em>Side note: The list of activated overlays is set in the **Admin Panel</em><em>.</em></p>
<h2 id='introduction' class='heading'>Introduction</h2>

<p>The framework provides you an overlay which is rendered on top of the host application interface. In order to activate the overlay, we have to initialize it with our SDK key during the creation of the overlay (you will see a sample call of the method below). Because the interactive experience StreamLayer provides is tightly coupled with the video playback and interacts with the audio session, some delegate methods have to be implemented to set up communication between the SDK and the host app.</p>
<h2 id='sdk-initialization' class='heading'>SDK initialization</h2>

<p>Initialize the overlay and implement necessary delegate methods, so the SDK can seamlessly integrate into your application’s existing scenarios. </p>

<ul>
<li>Import the <code><a href="Classes/StreamLayer.html">StreamLayer</a></code> and the third party dependencies packed inside the StreamLayer framework. Add this to the AppDelegate.swift file.<br></li>
</ul>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">StreamLayer</span>
<span class="kd">import</span> <span class="kt">StreamLayerVendor</span>
</code></pre>

<p>At this point, you can build the application to check and confirm whether you have correctly included the framework and related dependencies into the project.</p>

<ul>
<li>Init the SDK calling <code><a href="Classes/StreamLayer.html#/c:@M@StreamLayer@objc(cs)StreamLayer(cm)initSDKWith:isDebug:loggerDelegate:error:">StreamLayer.initSDK(...)</a></code><br></li>
</ul>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="n">_</span> <span class="nv">application</span><span class="p">:</span> <span class="kt">UIApplication</span><span class="p">,</span> <span class="n">didFinishLaunchingWithOptions</span>
  <span class="nv">launchOptions</span><span class="p">:</span> <span class="p">[</span><span class="kt">UIApplication</span> <span class="o">.</span><span class="kt">LaunchOptionsKey</span><span class="p">:</span> <span class="kt">Any</span><span class="p">]?)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
  <span class="k">do</span> <span class="p">{</span>
    <span class="k">try</span> <span class="kt">StreamLayer</span><span class="o">.</span><span class="nf">initSDK</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="s">"YOUR_SDK_API_KEY"</span><span class="p">)</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
    <span class="nf">fatalError</span><span class="p">(</span><span class="s">"failed to init StreamLayer SDK: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
  <span class="p">}</span>
<span class="o">...</span>
<span class="p">}</span>
</code></pre>
<h2 id='create-streamlayer-view-controller' class='heading'>Create StreamLayer View Controller</h2>

<ul>
<li>Init the overlay view controller using <code><a href="Classes/StreamLayer.html#/c:@M@StreamLayer@objc(cs)StreamLayer(cm)createOverlay:overlayDelegate:">StreamLayer.createOverlay(...)</a></code> method.<br></li>
</ul>
<pre class="highlight swift"><code><span class="c1">// blank reference view</span>
<span class="kd">private</span> <span class="k">let</span> <span class="nv">overlayView</span> <span class="o">=</span> <span class="kt">UIView</span><span class="p">()</span>
<span class="o">...</span>
<span class="kd">private</span> <span class="kd">lazy</span> <span class="k">var</span> <span class="nv">overlayViewController</span> <span class="o">=</span> <span class="kt">StreamLayer</span><span class="o">.</span><span class="nf">createOverlay</span><span class="p">(</span>
  <span class="n">overlayView</span><span class="p">,</span>
  <span class="nv">overlayDelegate</span><span class="p">:</span> <span class="n">videoPlayer</span>
<span class="p">)</span>
<span class="o">...</span>
<span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>

  <span class="c1">// reference view that is added to view hierarcy, must be on the same level with overlayVC</span>
  <span class="n">view</span><span class="o">.</span><span class="nf">addSubview</span><span class="p">(</span><span class="n">overlayView</span><span class="p">)</span>

  <span class="c1">// add overlay viewcontroller into the hierarchy</span>
  <span class="c1">// this is where the UI integration takes place</span>
  <span class="n">overlayVC</span><span class="o">.</span><span class="nf">willMove</span><span class="p">(</span><span class="nv">toParent</span><span class="p">:</span> <span class="k">self</span><span class="p">)</span>
  <span class="nf">addChild</span><span class="p">(</span><span class="n">overlayVC</span><span class="p">)</span>
  <span class="n">view</span><span class="o">.</span><span class="nf">addSubview</span><span class="p">(</span><span class="n">overlayVC</span><span class="o">.</span><span class="n">view</span><span class="p">)</span>
  <span class="n">overlayVC</span><span class="o">.</span><span class="nf">didMove</span><span class="p">(</span><span class="nv">toParent</span><span class="p">:</span> <span class="k">self</span><span class="p">)</span>
<span class="p">}</span>   
</code></pre>

<p>We will cover implementation of <code><a href="Protocols/SLROverlayDelegate.html">SLROverlayDelegate</a></code> methods below in this guide.</p>

<ul>
<li>Add StreamLayer view controller to the view hierarchy.<br></li>
</ul>
<pre class="highlight swift"><code><span class="nf">addChild</span><span class="p">(</span><span class="n">overlayViewController</span><span class="p">)</span>
<span class="n">view</span><span class="o">.</span><span class="nf">addSubview</span><span class="p">(</span><span class="n">overlayViewController</span><span class="o">.</span><span class="n">view</span><span class="p">)</span>
</code></pre>
<h1 id='positioning-the-overlay-handling-orientation-changes' class='heading'>Positioning the overlay, handling orientation changes</h1>

<ul>
<li>Position the Overlay ViewController.<br></li>
</ul>

<p>Please check the <a href="constraints-guide.html">Constraints Guide</a>, which covers the process of positioning the overlay within the layout.</p>
<h1 id='implement-slroverlaydelegate-methods' class='heading'>Implement SLROverlayDelegate methods</h1>

<p>The communication between the host application and the StreamLayer Framework is implemented via <code><a href="Protocols/SLROverlayDelegate.html">SLROverlayDelegate</a></code> delegate methods. Each method is covered in the following guides.</p>
<h2 id='audio-sessions-management' class='heading'>Audio Sessions Management</h2>

<p>Audio notifications are used by the SDK in various ways, including for voice chat, messaging, and other features.
<a href="audio-sessions-management.html">Audio Sessions Management</a>  </p>
<h2 id='customize-text-messages' class='heading'>Customize Text Messages</h2>

<p><a href="customize-text-messages.html">Customize Text Messages</a></p>
<h2 id='control-the-sdk-appearance' class='heading'>Control the SDK appearance</h2>

<p>Since the SDK delivers an interactive experience to viewers, it needs to fetch relevant data for the ongoing event. Because the SDK does not know by itself what the user is watching at a given moment, the host app must send an Event ID to the SDK. This method should be called each time the user switches video streams.<br>
For a detailed explanation of how this is handled, please check the <a href="overlay-visibility-handling.html">Overlay Visibility Handling</a></p>
<h1 id='integration-checklist' class='heading'>Integration Checklist</h1>

<ul>
<li><a href="constraints-guide.html">Constraints Guide</a></li>
<li><a href="audio-sessions-management.html">Audio Sessions Management</a></li>
<li><a href="customize-text-messages.html">Customize Text Messages</a></li>
<li><a href="overlay-visibility-handling.html">Overlay Visibility Handling</a></li>
</ul>
<h1 id='further-reading' class='heading'>Further Reading</h1>

<p>Please check the <a href="sample-integrations.html">Sample Integrations</a> section to see a functioning example of the integrated SDK.</p>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2020 <a class="link" href="" target="_blank" rel="external">StreamLayer</a>. All rights reserved. (Last updated: 2020-05-23)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.2</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
